package com.example.crimeplatformapi.repository;

import com.example.crimeplatformapi.entity.Cases;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public interface CasesRepository extends JpaRepository<Cases, Integer> {
    
    @Query("SELECT c FROM Cases c LEFT JOIN FETCH c.location")
    List<Cases> findAllWithLocation();
    
    @Query("SELECT c FROM Cases c LEFT JOIN FETCH c.location WHERE c.caseId = :caseId")
    Cases findByIdWithLocation(Integer caseId);
        
    List<Cases> findByReporterId(Integer reporterId);

    @Query("SELECT c FROM Cases c JOIN c.officers o WHERE o.officerId = :officerId")
    List<Cases> findAllByOfficerId(@Param("officerId") String officerId);
}